@use "./base.scss";

// put your custom CSS here!

/* A subtle background gradient for dark mode */
.dark body {
  background: linear-gradient(to bottom right, #282a36, #1d1e26);
  background-attachment: fixed;
}

/* Make blockquotes look awesome */
.dark blockquote {
  border-left: 3px solid var(--tertiary); /* Uses the green from our theme */
  background-color: rgba(255, 255, 255, 0.03);
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  color: var(--darkgray);
}

/* Style links with a cool underline effect */
.page-listing a.internal,
.content a.internal {
  text-decoration: none;
  background-image: linear-gradient(var(--secondary), var(--secondary));
  background-position: 0% 100%;
  background-repeat: no-repeat;
  background-size: 0% 2px;
  transition: background-size 0.3s;
}

.page-listing a.internal:hover,
.content a.internal:hover {
  background-size: 100% 2px;
}

/* Add a fade-in animation to the page content */
.popover-hint, .page .page-header, .page .page-content {
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}





/*
===========================================
  COOL GRAPH STYLES
===========================================
*/

/* We'll use the Dracula theme colors we defined in quartz.config.ts */
/* You can change these to any valid CSS color. */

.dark .graph-container {
  // Link color (Purple links)
  --graph-link: var(--secondary);

  // Default node color (Green nodes)
  --graph-node: var(--tertiary);

  // Text color
  --graph-text: var(--darkgray);
  
  // Node color when it's the current page
  --graph-node-active: var(--secondary);
}

.light .graph-container {
  // Link color (Pink links)
  --graph-link: var(--secondary);

  // Default node color (Cyan nodes)
  --graph-node: var(--tertiary);
  
  // Text color
  --graph-text: var(--darkgray);
  
  // Node color when it's the current page
  --graph-node-active: var(--secondary);
}

// Style for what happens when you hover over a node
.graph-container .graph-node:hover > circle {
  fill: var(--tertiary); // Make node circle green on hover in dark mode
  cursor: pointer;
}
.graph-container .graph-node:hover > text {
  fill: var(--dark); // Make text brighter on hover
  cursor: pointer;
}



/* === ADVANCED GRAPH STYLES === */

.graph-container {
  // Make the graph background slightly different from the page
  // In dark mode, this creates a nice "panel" effect
  .dark & {
    background-color: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    border: 1px solid var(--lightgray);
    padding: 0.5rem;
  }
}

// Style for the nodes (the circles)
.graph-container .graph-node > circle {
  stroke-width: 1px;
  transition: all 0.2s ease-in-out;

  // Style for the currently active page's node
  &.active {
    stroke: var(--tertiary);
    stroke-width: 2px;
    
    // Add a pulsing glow animation to the active node
    animation: pulse 2s infinite;
  }
}

// Style for the links (the lines)
.graph-container .graph-link {
  stroke-opacity: 0.6;
  transition: all 0.2s ease-in-out;
}

// --- Interactivity ---

// When hovering over a node...
.graph-container .graph-node:hover {
  cursor: pointer;

  // Make the circle larger and brighter
  > circle {
    transform: scale(1.5);
    stroke: var(--tertiary);
    fill: var(--tertiary) !important; // Use important to override inline styles
  }

  // Make the text bold and easier to read
  > text {
    font-weight: 600;
    fill: var(--dark) !important;
  }
}

// When hovering over a node, fade out non-connected elements
.graph-container:has(.graph-node:hover) .graph-node:not(:hover) {
  opacity: 0.2;
}
.graph-container:has(.graph-node:hover) .graph-link:not(:hover) {
  opacity: 0.1;
}


// --- Animations ---

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(var(--tertiary-rgb), 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(var(--tertiary-rgb), 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(var(--tertiary-rgb), 0);
  }
}

// You might need to add this to your main theme colors in quartz.config.ts
// to make the pulse animation work. For example:
// tertiary: "#84a59d",
// tertiary-rgb: "132, 165, 157",